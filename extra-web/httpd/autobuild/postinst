#!/bin/env bash

# Warn users that we no longer use `/srv/http' for default webroot.
if [ $(ls -A /srv/http) ]; then
	echo "Warning - we are no longer using \`/srv/http' for default web root."
	echo "Consider moving them to \`/srv/www' instead."
# else
	# Should we do this?
	# rm -r /srv/http
fi

# Enable default site
# For Apache httpd the configuration files must be ended with .conf.
if [ ! -e /etc/httpd/sites-enabled ]; then
	mkdir -p /etc/httpd/sites-enabled
fi

if [ ! -e /etc/httpd/sites-enabled/default.conf ]; then
        ln -sv /etc/httpd/sites-available/default.conf /etc/httpd/sites-enabled/default.conf
fi

# Permissions
mkdir -p /srv/www
chmod 0644 /srv/www
chmod 0644 /srv/www/index.apache.html
chmod -R 0644 /srv/www/cgi-bin
chown http:http /srv/www
chown http:http /srv/www/index.apache.html
chown -R http:http /srv/www/cgi-bin
